package org.example;
import java.util.Random;
import java.util.Scanner;

public class Game {
    Scanner sc = new Scanner(System.in);
    Random random = new Random();
    String name = "";

    public void start() {
        String breed = chooseBreed();
        System.out.println("Введите имя питомца:");
        name = sc.nextLine();
        Pet pet = new Pet(name, breed);

        if (breed.equals("1")) System.out.println("Вы выбрали породу: Кошка");
        else if (breed.equals("2")) System.out.println("Вы выбрали породу: Собака");
        else if (breed.equals("3")) System.out.println("Вы выбрали породу: Хомяк");
        else if (breed.equals("4")) System.out.println("Вы выбрали породу: Кролик");
        System.out.println("Ваш питомец создан! Позаботьтесь о нём");

        // 4. Основной цикл игры
        while (pet.isAlive()) {
            pet.printStatus();
            System.out.println("Выберите действие:");
            System.out.println("1 — Накормить");
            System.out.println("2 — Поиграть");
            System.out.println("3 — Уложить спать");
            System.out.println("4 — Ничего не делать");
            System.out.println("5 — Выход");
            System.out.print("Ваш выбор: ");

            int choice = sc.nextInt();
            sc.nextLine();

            if (choice == 1) pet.feed();
            else if (choice == 2) pet.play();
            else if (choice == 3) pet.sleep();
            else if (choice == 4) pet.doNothing();
            else if (choice == 5) {
                System.out.println("Вы вышли из игры.");
                return;
            } else {
                System.out.println("Нет такого действия!");
            }

            // Случайные события
            int eventChance = random.nextInt(100);
            if (eventChance < 30) {
                System.out.println(pet.name + " нашёл игрушку! Настроение +10");
                pet.mood += 10;
            } else if (eventChance >= 30 && eventChance < 60) {
                System.out.println(pet.name + " заболел! Энергия −20");
                pet.energy -= 20;
            }
            pet.normalize();
            pet.tick();
        }
        System.out.println("Ваш питомец умер...");
    }

    // Метод выбора породы
    String chooseBreed() {
        while (true) {
            System.out.println("- Выберите породу питомца:");
            System.out.println("1 — Кошка");
            System.out.println("2 — Собака");
            System.out.println("3 — Хомяк");
            System.out.println("4 — Кролик");
            System.out.print("Ваш выбор: ");

            String choice1 = sc.nextLine();

            if (choice1.equals("1") || choice1.equals("2") ||
                    choice1.equals("3") || choice1.equals("4")) {
                return choice1;
            }
            System.out.println("Неверный выбор. Попробуй снова.");
        }
    }
}
